# Manufacturing Ontology System 사용자 가이드

## 목차
1. [시스템 개요](#시스템-개요)
2. [시작하기](#시작하기)
3. [주요 기능 사용법](#주요-기능-사용법)
4. [데이터 관리](#데이터-관리)
5. [시각화 및 분석](#시각화-및-분석)
6. [고급 기능](#고급-기능)
7. [문제 해결](#문제-해결)
8. [FAQ](#faq)

## 시스템 개요

Manufacturing Ontology System은 제조 산업의 복잡한 데이터를 체계적으로 관리하고 시각화하는 통합 플랫폼입니다. 온톨로지 기반으로 설비, 센서, 작업지시서, 품질관리 등의 데이터를 연결하여 제조 프로세스의 전체적인 그림을 제공합니다.

### 주요 구성 요소
- **온톨로지 엔진**: 데이터 간의 의미적 관계 관리
- **시각화 도구**: 인터랙티브 그래프 및 대시보드
- **분석 엔진**: 실시간 모니터링 및 트렌드 분석
- **관계 편집기**: 직관적인 데이터 관계 관리

## 시작하기

### 1. 시스템 접속
웹 브라우저에서 `http://localhost:3001`로 접속합니다.

### 2. 첫 화면 구성
- **네비게이션 메뉴**: 상단의 탭 메뉴
- **사이드바**: 필터 및 검색 도구
- **메인 영역**: 선택한 페이지의 콘텐츠

### 3. 기본 설정
- 사이드바 접기/펼치기: 왼쪽 화살표 버튼
- 페이지 전환: 상단 탭 메뉴 클릭
- 키보드 단축키: Ctrl+1~4로 페이지 전환

## 주요 기능 사용법

### 1. 그래프 뷰 (Graph View)

#### 기본 조작
- **확대/축소**: 마우스 휠 또는 +/- 버튼
- **이동**: 마우스 드래그
- **노드 선택**: 노드 클릭
- **관계 확인**: 엣지 클릭

#### 레이아웃 변경
1. 상단 컨트롤에서 레이아웃 선택
2. 사용 가능한 레이아웃:
   - **Force-directed**: 자연스러운 배치
   - **Grid**: 격자 형태 배치
   - **Hierarchical**: 계층 구조
   - **Circle**: 원형 배치

#### 필터링
1. 사이드바에서 노드 타입 선택
2. 관계 타입 선택
3. 검색창에 키워드 입력
4. 실시간으로 그래프 업데이트

#### 노드 상세 정보
- 노드 클릭 시 우측에 상세 패널 표시
- 노드 ID, 타입, 라벨 정보 확인
- 관련 관계 및 속성 정보 표시

### 2. 대시보드 (Dashboard)

#### KPI 카드
- **설비 효율성**: OEE 지표
- **품질률**: 합격률 통계
- **활성 작업**: 진행 중인 작업지시서 수
- **생산 트렌드**: 생산량 변화

#### 차트 분석
- **품질 트렌드**: 시간별 품질 지표 변화
- **설비 상태**: 설비별 상태 분포
- 차트 클릭으로 상세 정보 확인

#### 자동 새로고침
- 우측 상단 토글 버튼으로 활성화/비활성화
- 기본 새로고침 간격: 30초

### 3. 데이터 관리자 (Data Manager)

#### 파일 업로드
1. **드래그 앤 드롭**: 파일을 업로드 영역에 드래그
2. **파일 선택**: 클릭하여 파일 선택 대화상자 열기
3. **지원 형식**: .ttl, .owl, .rdf 파일
4. **자동 검증**: SHACL 스키마 기반 검증

#### 업로드 진행 상황
- 프로그레스 바로 진행률 확인
- 실시간 검증 결과 표시
- 성공/실패 상태 표시

#### 업로드 히스토리
- 최근 업로드 파일 목록
- 파일명, 상태, 로딩된 트리플 수
- 타임스탬프 정보

### 4. 관계 편집기 (Relationship Editor)

#### 관계 추가
1. **Add Relationship** 버튼 클릭
2. 폼에 정보 입력:
   - **Subject**: 주체 URI 또는 라벨
   - **Predicate**: 관계 타입 선택
   - **Object**: 객체 URI 또는 라벨
3. **Add** 버튼으로 추가

#### 관계 목록 관리
- 기존 관계 테이블 형태로 표시
- 정렬 및 필터링 가능
- 개별 삭제 버튼 제공

#### 벌크 작업
- 다중 선택으로 일괄 삭제
- CSV/JSON 형식으로 내보내기

#### 히스토리 관리
- **실행 취소**: Ctrl+Z
- **다시 실행**: Ctrl+Y
- 변경 로그 자동 저장

## 데이터 관리

### 1. 온톨로지 데이터 구조

#### 기본 클래스
- **Equipment**: 설비 (기계, 라인 등)
- **Sensor**: 센서 (온도, 압력, 진동 등)
- **Variable**: 변수 (측정값, 사양 등)
- **WorkOrder**: 작업지시서
- **QualityControl**: 품질관리
- **Maintenance**: 유지보수
- **Batch**: 배치
- **Defect**: 불량

#### 관계 타입
- **partOf**: 부분-전체 관계
- **measures**: 센서-변수 관계
- **locatedIn**: 위치 관계
- **executedBy**: 작업지시서-설비 관계
- **hasQuality**: 제품-품질관리 관계
- **hasMaintenance**: 설비-유지보수 관계

### 2. 데이터 입력 방법

#### TTL 파일 작성
```turtle
@prefix ex: <http://example.org/mes#> .

# 설비 정의
ex:MachineA a ex:Equipment ;
  rdfs:label "Assembly Machine A" ;
  ex:code "MA001" ;
  ex:status "active" .

# 센서 정의
ex:TempSensor1 a ex:Sensor ;
  rdfs:label "Temperature Sensor 1" ;
  ex:measures ex:Temperature .

# 변수 정의
ex:Temperature a ex:Variable ;
  rdfs:label "Process Temperature" ;
  ex:hasUnit ex:Celsius ;
  ex:specUpper 85.0 ;
  ex:specLower 75.0 .
```

#### API를 통한 데이터 입력
```python
import requests

# 작업지시서 생성
data = {
    "workOrderNumber": "WO001",
    "plannedQuantity": 100,
    "actualQuantity": 95,
    "status": "completed",
    "equipment_id": "ex:MachineA"
}

response = requests.post(
    "http://localhost:8001/manufacturing/work-orders",
    json=data
)
```

### 3. 데이터 검증

#### SHACL 스키마
- 데이터 무결성 보장
- 필수 속성 검증
- 데이터 타입 검증
- 범위 검증

#### 검증 규칙 예제
```turtle
ex:WorkOrderShape a sh:NodeShape ;
  sh:targetClass ex:WorkOrder ;
  sh:property [
    sh:path ex:plannedQuantity ;
    sh:minInclusive 1 ;
    sh:datatype xsd:integer
  ] .
```

## 시각화 및 분석

### 1. 그래프 시각화

#### 노드 스타일링
- **색상**: 노드 타입별 자동 색상 할당
- **크기**: 중요도에 따른 크기 조정
- **라벨**: 노드명 또는 사용자 정의 라벨

#### 엣지 스타일링
- **방향**: 화살표로 관계 방향 표시
- **두께**: 관계 중요도에 따른 두께
- **라벨**: 관계 타입 표시

#### 인터랙션
- **호버**: 마우스 오버 시 하이라이트
- **선택**: 클릭으로 노드/엣지 선택
- **컨텍스트 메뉴**: 우클릭으로 추가 옵션

### 2. 분석 기능

#### 설비 효율성 (OEE)
- **가용성**: 설비 가동 시간 비율
- **성능**: 설비 성능 효율
- **품질**: 품질 합격률
- **OEE**: 가용성 × 성능 × 품질

#### 품질 트렌드
- 시간별 품질 지표 변화
- 합격/불합격 비율
- 트렌드 예측

#### 설비 상태 모니터링
- 실시간 설비 상태
- 알람 및 경고
- 유지보수 스케줄

## 고급 기능

### 1. 키보드 단축키

| 단축키 | 기능 |
|--------|------|
| Ctrl+1 | 그래프 뷰로 이동 |
| Ctrl+2 | 대시보드로 이동 |
| Ctrl+3 | 데이터 관리자로 이동 |
| Ctrl+4 | 관계 편집기로 이동 |
| Ctrl+Z | 실행 취소 |
| Ctrl+Y | 다시 실행 |
| Escape | 모달 닫기 |

### 2. 데이터 내보내기

#### 그래프 내보내기
- **PNG**: 고해상도 이미지
- **SVG**: 벡터 그래픽
- **JSON**: 그래프 데이터

#### 관계 데이터 내보내기
- **CSV**: 스프레드시트 형식
- **JSON**: 구조화된 데이터
- **TTL**: 온톨로지 형식

### 3. 사용자 설정

#### 로컬 저장소
- 사이드바 상태
- 현재 페이지
- 필터 설정
- 레이아웃 설정

#### 세션 관리
- 자동 저장
- 브라우저 새로고침 시 복원
- 로그아웃 시 초기화

## 문제 해결

### 1. 일반적인 문제

#### 그래프가 표시되지 않음
- **원인**: 데이터가 없거나 네트워크 오류
- **해결**: 데이터 업로드 확인, 네트워크 연결 확인

#### 파일 업로드 실패
- **원인**: 파일 형식 오류 또는 크기 초과
- **해결**: 지원 형식 확인, 파일 크기 확인

#### 관계 추가 실패
- **원인**: 잘못된 URI 또는 존재하지 않는 노드
- **해결**: URI 형식 확인, 노드 존재 여부 확인

### 2. 성능 문제

#### 느린 로딩
- **원인**: 대용량 데이터 또는 네트워크 지연
- **해결**: 데이터 제한 설정, 네트워크 확인

#### 메모리 부족
- **원인**: 브라우저 메모리 한계
- **해결**: 브라우저 재시작, 다른 브라우저 사용

### 3. 데이터 문제

#### 검증 실패
- **원인**: SHACL 스키마 위반
- **해결**: 스키마 규칙 확인, 데이터 수정

#### 관계 오류
- **원인**: 잘못된 관계 정의
- **해결**: 온톨로지 스키마 확인

## FAQ

### Q: 시스템 요구사항은 무엇인가요?
A: 최신 웹 브라우저(Chrome, Firefox, Safari, Edge)와 인터넷 연결이 필요합니다.

### Q: 데이터는 어디에 저장되나요?
A: Neo4j 그래프 데이터베이스에 저장되며, Docker 볼륨을 통해 영구 저장됩니다.

### Q: 여러 사용자가 동시에 사용할 수 있나요?
A: 네, 여러 사용자가 동시에 접속하여 사용할 수 있습니다.

### Q: 데이터 백업은 어떻게 하나요?
A: Docker 볼륨을 백업하거나 Neo4j의 내보내기 기능을 사용할 수 있습니다.

### Q: API를 통해 외부 시스템과 연동할 수 있나요?
A: 네, REST API를 통해 외부 시스템과 연동이 가능합니다.

### Q: 사용자 인증은 어떻게 하나요?
A: 현재는 인증이 없지만, 향후 JWT 토큰 기반 인증을 추가할 예정입니다.

### Q: 모바일에서도 사용할 수 있나요?
A: 네, 반응형 디자인으로 모바일에서도 사용 가능합니다.

### Q: 데이터를 다른 형식으로 내보낼 수 있나요?
A: 네, JSON, CSV, TTL, PNG, SVG 등 다양한 형식으로 내보낼 수 있습니다.

### Q: 시스템을 확장할 수 있나요?
A: 네, 마이크로서비스 아키텍처로 설계되어 수평 확장이 가능합니다.

### Q: 기술 지원은 어떻게 받을 수 있나요?
A: GitHub Issues를 통해 이슈를 리포트하거나 문서를 참조하세요.

---

이 사용자 가이드가 Manufacturing Ontology System을 효과적으로 사용하는 데 도움이 되기를 바랍니다. 추가 질문이나 개선 사항이 있으시면 언제든지 연락해 주세요.
